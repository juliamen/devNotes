
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../Salesforce/parseDate/">
      
      
        <link rel="next" href="../ArchitectLLD/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>ArchitectHLD - My Dev Knowledge Base</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mulesoft-hld" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="My Dev Knowledge Base" class="md-header__button md-logo" aria-label="My Dev Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Dev Knowledge Base
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ArchitectHLD
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Salesforce/Formstack/" class="md-tabs__link">
          
  
  
  Salesforce

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Mulesoft

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="My Dev Knowledge Base" class="md-nav__button md-logo" aria-label="My Dev Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My Dev Knowledge Base
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Salesforce
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Salesforce
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Salesforce/Formstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formstack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Salesforce/JSON-to-SObject/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON-to-SObject
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Salesforce/SobjectChangeHandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SobjectChangeHandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Salesforce/VirtualRemoteAssistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualRemoteAssistant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Salesforce/gitFlow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gitFlow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Salesforce/parseDate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    parseDate
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Mulesoft
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Mulesoft
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    ArchitectHLD
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    ArchitectHLD
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture-text-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      High Level Architecture (text + diagram)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Naming conventions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apis-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      APIs &amp; responsibilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APIs &amp; responsibilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-apis" class="md-nav__link">
    <span class="md-ellipsis">
      System APIs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Process APIs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experience-exposure-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Experience / Exposure APIs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-diagrams" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence diagrams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sequence diagrams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#salesforce-mule-thirdparty-simplified" class="md-nav__link">
    <span class="md-ellipsis">
      Salesforce -&gt; Mule -&gt; ThirdParty (simplified)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-sql-extract-salesforce-upsert-simplified" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler SQL extract -&gt; Salesforce upsert (simplified)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-model-message-contracts-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Data model / message contracts (examples)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data model / message contracts (examples)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#salesforce-exp-example-json-sent-by-salesforce-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Salesforce -&gt; EXP (example JSON sent by Salesforce Flow)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thirdparty-payload-example" class="md-nav__link">
    <span class="md-ellipsis">
      ThirdParty payload (example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-result-row-salesforce-upsert-example" class="md-nav__link">
    <span class="md-ellipsis">
      SQL result row -&gt; Salesforce upsert (example)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    <span class="md-ellipsis">
      Security
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-retries" class="md-nav__link">
    <span class="md-ellipsis">
      Error handling &amp; retries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-auditing" class="md-nav__link">
    <span class="md-ellipsis">
      Logging &amp; auditing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#observability-alerts" class="md-nav__link">
    <span class="md-ellipsis">
      Observability &amp; Alerts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-functional-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Non-functional requirements
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ArchitectLLD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ArchitectLLD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../APIGatewayAutodiscovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    APIGatewayAutodiscovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../APILedArchitecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    APILedArchitecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AzureKeyVault/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzureKeyVault
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AnypointSecureAPI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AnypointSecureAPI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ObjectStore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ObjectStore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ObjectStoreLock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ObjectStoreLock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Routing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SQLPagination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQLPagination
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VMQueueObjectStoreComparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VMQueueObjectStoreComparison
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VMQueues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VMQueues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VirtualPrivateSpaceVPN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualPrivateSpaceVPN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cachingObjStore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cachingObjStore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataMasking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dataMasking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../envVariables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    envVariables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../projectSetup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    projectSetup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture-text-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      High Level Architecture (text + diagram)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Naming conventions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apis-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      APIs &amp; responsibilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APIs &amp; responsibilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-apis" class="md-nav__link">
    <span class="md-ellipsis">
      System APIs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Process APIs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experience-exposure-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Experience / Exposure APIs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-diagrams" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence diagrams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sequence diagrams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#salesforce-mule-thirdparty-simplified" class="md-nav__link">
    <span class="md-ellipsis">
      Salesforce -&gt; Mule -&gt; ThirdParty (simplified)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-sql-extract-salesforce-upsert-simplified" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler SQL extract -&gt; Salesforce upsert (simplified)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-model-message-contracts-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Data model / message contracts (examples)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data model / message contracts (examples)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#salesforce-exp-example-json-sent-by-salesforce-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Salesforce -&gt; EXP (example JSON sent by Salesforce Flow)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thirdparty-payload-example" class="md-nav__link">
    <span class="md-ellipsis">
      ThirdParty payload (example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-result-row-salesforce-upsert-example" class="md-nav__link">
    <span class="md-ellipsis">
      SQL result row -&gt; Salesforce upsert (example)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    <span class="md-ellipsis">
      Security
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-retries" class="md-nav__link">
    <span class="md-ellipsis">
      Error handling &amp; retries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-auditing" class="md-nav__link">
    <span class="md-ellipsis">
      Logging &amp; auditing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#observability-alerts" class="md-nav__link">
    <span class="md-ellipsis">
      Observability &amp; Alerts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-functional-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Non-functional requirements
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="mulesoft-hld">MuleSoft HLD</h1>
<h2 id="summary">Summary</h2>
<p>We will implement an API-led architecture with three layers:</p>
<ul>
<li><strong>System APIs</strong> — canonical adapters to systems of record (Salesforce, ThirdParty REST API, SQL DB).</li>
<li><strong>Process APIs</strong> — orchestration and transformation; reusable business logic.</li>
<li><strong>Experience / Orchestration APIs</strong> — interfaces targeted at consumers (Salesforce Flow HTTP endpoint, Scheduler job).</li>
</ul>
<p>Two integration flows are required:</p>
<ol>
<li><strong>Salesforce -&gt; MuleSoft -&gt; ThirdParty</strong>: on record change in Salesforce a Flow will call an Experience API (HTTP listener in Mule) -&gt; authenticated -&gt; logged -&gt; Process API will transform and call ThirdParty System API (handles auth + call). Responses are returned to Salesforce and logged.</li>
<li><strong>SQL -&gt; MuleSoft Scheduler -&gt; Salesforce</strong>: scheduled Mule app (cron) will call the SQL System API (JDBC) to extract changed/new rows, Process API transforms into Salesforce object payloads and calls the Salesforce System API to upsert records.</li>
</ol>
<hr />
<h2 id="high-level-architecture-text-diagram">High Level Architecture (text + diagram)</h2>
<pre><code class="language-mermaid">flowchart TB
    %% Salesforce Trigger
    SF[&quot;Salesforce Flow / Platform Event&quot;]:::salesforce

    %% MuleSoft Layers
    subgraph MuleSoft[&quot;API-led Architecture&quot;]
        direction TB
        EXP[&quot;Experience API (acme-exp-sales-inbound)&lt;br&gt;- HTTP Listener&lt;br&gt;- Auth, Validation&quot;]:::exp
        PROC_SF3P[&quot;Process API (acme-proc-sales-to-3p)&lt;br&gt;- Transform &amp; Orchestrate&quot;]:::proc
        SAPI_3P[&quot;System API (acme-sapi-thirdparty-rest)&lt;br&gt;- Call ThirdParty REST&quot;]:::sapi
        SAPI_SF[&quot;System API (acme-sapi-salesforce)&lt;br&gt;- Salesforce Connector&quot;]:::sapi
        SCHED[&quot;Scheduler App (acme-sched-sql-extract)&lt;br&gt;- Cron Trigger&quot;]:::exp
        PROC_SQLSF[&quot;Process API (acme-proc-sql-to-sales)&lt;br&gt;- Transform &amp; Batch Upsert&quot;]:::proc
        SAPI_SQL[&quot;System API (acme-sapi-sql-db)&lt;br&gt;- JDBC Query&quot;]:::sapi
    end

    %% Third-Party Systems
    TP[&quot;ThirdParty REST API&quot;]:::external
    DB[(SQL Database)]:::external

    %% FLOW 1: Salesforce -&gt; Mule -&gt; ThirdParty
    SF --&gt;|HTTP POST /exp/sales/v1/record-change| EXP
    EXP --&gt; PROC_SF3P
    PROC_SF3P --&gt;|Transform + Call| SAPI_3P
    SAPI_3P --&gt;|POST /third/api| TP
    TP --&gt;|Response 200/4xx/5xx| SAPI_3P --&gt; PROC_SF3P --&gt; EXP --&gt; SF

    %% FLOW 2: SQL -&gt; Mule -&gt; Salesforce
    SCHED --&gt;|Cron Trigger| SAPI_SQL
    SAPI_SQL --&gt;|Changed Records| PROC_SQLSF
    PROC_SQLSF --&gt;|Transform to Salesforce Schema| SAPI_SF
    SAPI_SF --&gt;|Upsert via Composite API| SF

    %% Styles
    classDef exp fill:#4BA3C3,stroke:#2B7A8B,stroke-width:2px,color:white;
    classDef proc fill:#F5A623,stroke:#C47C00,stroke-width:2px,color:black;
    classDef sapi fill:#6B8E23,stroke:#476A17,stroke-width:2px,color:white;
    classDef salesforce fill:#00A1E0,stroke:#0076A8,stroke-width:2px,color:white;
    classDef external fill:#999,stroke:#333,stroke-width:1.5px,color:white;
</code></pre>
<hr />
<h2 id="naming-conventions">Naming conventions</h2>
<p>Use predictable names for apps, APIs, and artifacts for discoverability and management:</p>
<ul>
<li>Mule App names: <code>org.domain.layer-purpose-environment</code> e.g. <code>acme.system.thirdparty-rest-prod</code> (or <code>acme-sapi-thirdparty-rest-prod</code>).</li>
<li>Maven artifactId: <code>acme-&lt;layer&gt;-&lt;purpose&gt;</code> e.g. <code>acme-sapi-thirdparty-rest</code>.</li>
<li>API names (Anypoint Exchange): <code>&lt;Org&gt; - &lt;Layer&gt; - &lt;Purpose&gt; - &lt;API Version&gt;</code> e.g. <code>ACME - SAPI - ThirdParty REST - v1</code>.</li>
<li>RAML / OAS files: <code>sapi-thirdparty-rest-1.0.raml</code> or <code>proc-sales-to-thirdparty-1.0.oas</code>.</li>
<li>Properties files: <code>dev.properties</code>, <code>test.properties</code>, <code>prod.properties</code> stored in secure manager.</li>
<li>Logging correlation id: <code>X-Correlation-ID: &lt;org&gt;-&lt;app&gt;-&lt;uuid&gt;</code>.</li>
</ul>
<hr />
<h2 id="apis-responsibilities">APIs &amp; responsibilities</h2>
<h3 id="system-apis">System APIs</h3>
<ul>
<li>
<p><strong>SAPI - Salesforce (acme-sapi-salesforce)</strong></p>
</li>
<li>
<p>Purpose: Wrapper for Salesforce REST API (sObject upsert, composite). Centralizes SF auth and rate-limit handling.</p>
</li>
<li>Exposes: <code>/sapi/salesforce/v1/upsert</code>, <code>/sapi/salesforce/v1/query</code>.</li>
<li>
<p>Auth: Client credentials or JWT using a named credential; secrets in secure properties.</p>
</li>
<li>
<p><strong>SAPI - ThirdParty REST (acme-sapi-thirdparty-rest)</strong></p>
</li>
<li>
<p>Purpose: Handle 3rd-party auth (API keys, OAuth), retries, and circuit-breaker logic.</p>
</li>
<li>
<p>Exposes: <code>/sapi/thirdparty/v1/post-job</code>.</p>
</li>
<li>
<p><strong>SAPI - SQL DB (acme-sapi-sql-db)</strong></p>
</li>
<li>
<p>Purpose: JDBC adapter for scheduled reads. Exposes parameterized query endpoints for the scheduler.</p>
</li>
<li>Exposes: <code>/sapi/sql/v1/query-changes?since=YYYY-MM-DDThh:mm</code>.</li>
</ul>
<h3 id="process-apis">Process APIs</h3>
<ul>
<li>
<p><strong>PAPI - SalesToThirdParty (acme-proc-sales-to-3p)</strong></p>
</li>
<li>
<p>Purpose: Orchestrate Salesforce inbound payloads, enrich/transform into ThirdParty schema, apply business rules, call SAPI-ThirdParty.</p>
</li>
<li>
<p>Responsibilities: Validation, DataWeave transform, idempotency checks (dedupe store), error classification.</p>
</li>
<li>
<p><strong>PAPI - SQLToSales (acme-proc-sql-to-sales)</strong></p>
</li>
<li>
<p>Purpose: Read SQL results, transform to Salesforce object model, batch for upsert to SAPI-Salesforce.</p>
</li>
<li>Responsibilities: Pagination, chunking, batching, transform mapping, partial-failure handling.</li>
</ul>
<h3 id="experience-exposure-apis">Experience / Exposure APIs</h3>
<ul>
<li>
<p><strong>EXP - SalesInbound (acme-exp-sales-inbound)</strong></p>
</li>
<li>
<p>Purpose: HTTP listener for Salesforce Flow to POST record-change events. Lightweight validation and auth.</p>
</li>
<li>
<p>Endpoint: <code>POST /exp/sales/v1/record-change</code></p>
</li>
<li>
<p><strong>SCHED App</strong></p>
</li>
<li>
<p>Purpose: Cron-based trigger that calls <code>SAPI - SQL</code> to retrieve changes and passes to <code>PAPI - SQLToSales</code>.</p>
</li>
</ul>
<hr />
<h2 id="sequence-diagrams">Sequence diagrams</h2>
<h3 id="salesforce-mule-thirdparty-simplified">Salesforce -&gt; Mule -&gt; ThirdParty (simplified)</h3>
<pre><code class="language-mermaid">sequenceDiagram
  participant SF as Salesforce Flow
  participant EXP as EXP-SalesInbound
  participant PROC as PAPI-SalesTo3P
  participant S3 as SAPI-ThirdParty
  participant TP as ThirdParty REST
  SF-&gt;&gt;EXP: POST /exp/sales/v1/record-change {payload}
  Note right of EXP: Authn via API key / OAuth
  EXP-&gt;&gt;PROC: validate + enrich
  PROC-&gt;&gt;S3: transform to thirdparty schema
  S3-&gt;&gt;TP: POST /third/api
  TP--&gt;&gt;S3: 200 / error
  S3--&gt;&gt;PROC: pass response
  PROC--&gt;&gt;EXP: result
  EXP--&gt;&gt;SF: 200 / 500
</code></pre>
<h3 id="scheduler-sql-extract-salesforce-upsert-simplified">Scheduler SQL extract -&gt; Salesforce upsert (simplified)</h3>
<pre><code class="language-mermaid">sequenceDiagram
  participant Sched as Scheduler App
  participant SQL as SAPI-SQL
  participant PROC as PAPI-SQLToSales
  participant SFAPI as SAPI-Salesforce
  Sched-&gt;&gt;SQL: GET /sapi/sql/v1/query-changes?since=...
  SQL--&gt;&gt;Sched: rows (paged)
  Sched-&gt;&gt;PROC: pass rows
  PROC-&gt;&gt;SFAPI: batch upsert (composite)
  SFAPI--&gt;&gt;PROC: partial success/fail
  PROC-&gt;&gt;Sched: ack / errors to DLQ
</code></pre>
<hr />
<h2 id="data-model-message-contracts-examples">Data model / message contracts (examples)</h2>
<h3 id="salesforce-exp-example-json-sent-by-salesforce-flow">Salesforce -&gt; EXP (example JSON sent by Salesforce Flow)</h3>
<pre><code class="language-json">{
  &quot;correlationId&quot;: &quot;ACME-SALES-1234-uuid&quot;,
  &quot;eventType&quot;: &quot;Account.Updated&quot;,
  &quot;record&quot;: {
    &quot;Id&quot;: &quot;001xx000003NGs1AAG&quot;,
    &quot;Name&quot;: &quot;Acme Ltd&quot;,
    &quot;BillingAddress&quot;: {...}
  },
  &quot;changedFields&quot;: [&quot;BillingAddress&quot;, &quot;Phone&quot;]
}
</code></pre>
<h3 id="thirdparty-payload-example">ThirdParty payload (example)</h3>
<pre><code class="language-json">{
  &quot;clientId&quot;: &quot;001xx000003NGs1AAG&quot;,
  &quot;companyName&quot;: &quot;Acme Ltd&quot;,
  &quot;address&quot;: {
    &quot;line1&quot;: &quot;...&quot;,
    &quot;city&quot;: &quot;...&quot;
  }
}
</code></pre>
<h3 id="sql-result-row-salesforce-upsert-example">SQL result row -&gt; Salesforce upsert (example)</h3>
<pre><code class="language-json">{
  &quot;external_id__c&quot;: &quot;ext-123&quot;,
  &quot;name&quot;: &quot;John Smith&quot;,
  &quot;email&quot;: &quot;john.smith@example.com&quot;,
  &quot;tenancy_start__c&quot;: &quot;2025-01-01&quot;
}
</code></pre>
<hr />
<h2 id="security">Security</h2>
<ul>
<li><strong>Transport</strong>: TLS 1.2+ for all endpoints.</li>
<li>
<p><strong>Authentication</strong>:</p>
</li>
<li>
<p>Salesforce -&gt; EXP: use OAuth bearer token or Mutual TLS; prefer signed JWT / Named Credential.</p>
</li>
<li>Mule -&gt; ThirdParty: use stored credentials in Anypoint Secrets Manager; rotate regularly.</li>
<li><strong>Authorization</strong>: scoping by API key or OAuth scopes.</li>
<li><strong>Secrets</strong>: store in Anypoint Secrets Manager / secure properties, never plain text.</li>
<li><strong>Network</strong>: lock down to VPC/Private Space where required (for on-prem SQL access use VPN/Private Link).</li>
</ul>
<hr />
<h2 id="error-handling-retries">Error handling &amp; retries</h2>
<ul>
<li><strong>Client errors (4xx)</strong>: return to caller with meaningful error codes. Log and mark as business error (no retry).</li>
<li><strong>Server errors (5xx)</strong>: implement retry policy with exponential backoff in System APIs; after <code>N</code> attempts push to DLQ (Anypoint MQ) and create an incident ticket.</li>
<li><strong>Idempotency</strong>: implement idempotency via <code>X-Idempotency-Key</code> (or storing processed event ids) for duplicate event prevention.</li>
<li><strong>Partial failures</strong>: when batching to Salesforce, use Composite API and handle partial successes — enqueue failures for retry with context.</li>
</ul>
<hr />
<h2 id="logging-auditing">Logging &amp; auditing</h2>
<ul>
<li>Every request should carry <code>X-Correlation-ID</code> and <code>X-Request-TS</code>.</li>
<li>Structured logs (JSON) with at least: correlationId, apiName, operation, status, elapsedMs, ownerApp.</li>
<li>Send logs to ELK / Splunk or Anypoint Monitoring. Store audit events of critical operations in a durable store or send to MQ for downstream processing.</li>
</ul>
<hr />
<h2 id="observability-alerts">Observability &amp; Alerts</h2>
<ul>
<li>
<p>Anypoint Monitoring dashboards for:</p>
</li>
<li>
<p>Request rate / latency per API.</p>
</li>
<li>Error rate (4xx/5xx) per endpoint.</li>
<li>Downstream third-party SLA breaches.</li>
<li>Alerts: high error rate, queue depth in DLQ, repeated authentication failures.</li>
</ul>
<hr />
<h2 id="non-functional-requirements">Non-functional requirements</h2>
<ul>
<li>Throughput: sized for expected spikes (give numbers if you have them). Use batching &amp; concurrent processing.</li>
<li>SLA: e.g., 99.5% success for day-to-day operations.</li>
<li>Latency: sync calls from Salesforce should respond within 2–3 seconds where possible; longer-running work can be asynchronous.</li>
</ul>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>